From bec9f13d05a13c143daff0c206eee5a77461f054 Mon Sep 17 00:00:00 2001
From: Rodrigo Kumpera <kumpera@gmail.com>
Date: Mon, 2 Oct 2017 16:31:40 -0700
Subject: [PATCH] [jit] Fix using conv.u with string.

---
 mono/mini/iltests.il     | 12 ++++++++++++
 mono/mini/method-to-ir.c |  1 +
 2 files changed, 13 insertions(+)

diff --git a/mono/mini/method-to-ir.c b/mono/mini/method-to-ir.c
index ce326f3c2d3..54e8c3580bf 100644
--- a/mono/mini/method-to-ir.c
+++ b/mono/mini/method-to-ir.c
@@ -1070,6 +1070,7 @@ type_from_op (MonoCompile *cfg, MonoInst *ins, MonoInst *src1, MonoInst *src2)
 			break;
 		case STACK_PTR:
 		case STACK_MP:
+		case STACK_OBJ:
 #if SIZEOF_VOID_P == 8
 			ins->opcode = OP_LCONV_TO_U;
 #else
-- 
2.14.2

